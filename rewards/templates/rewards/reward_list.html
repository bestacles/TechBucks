{% extends 'base.html' %}

{% block content %}
<h2>Available Rewards</h2>

<form method="get">
    <label for="sort">Sort by:</label>
    <select name="sort" id="sort" onchange="this.form.submit()">
        <option value="name" {% if request.GET.sort == "name" %}selected{% endif %}>Name</option>
        <option value="cost" {% if request.GET.sort == "cost" %}selected{% endif %}>Cost</option>
        <option value="category" {% if request.GET.sort == "category" %}selected{% endif %}>Category</option>
    </select>
</form>

<div class="rewards-list">
{% for reward in rewards %}
  <div>
    <h2>{{ reward.name }}</h2>
    <p>{{ reward.description }}</p>
    <p>Cost: {{ reward.cost }} TechBucks</p>
    <img src="{{ reward.qr_code.url }}" alt="QR Code">

    <!-- Assuming the student ID is available in the context as 'student.id' -->
    <a href="{% url 'rewards:redeem_reward' student.id reward.id %}">Redeem</a>
  </div>
{% endfor %}
</div>
{% endblock %}
